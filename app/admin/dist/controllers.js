angular.module("myApp").controller("loginController",["$scope","$location","Service",function(t,e,o){t.login=function(){t.error=!1,t.disabled=!0,o.login(t.loginForm.email,t.loginForm.password).then(function(){e.path("/"),t.disabled=!1,t.loginForm={}}).catch(function(){t.error=!0,t.errorMessage="Invalid email and/or password",t.disabled=!1,t.loginForm={}})}}]),angular.module("myApp").controller("logoutController",["$scope","$location","Service",function(t,e,o){console.log("logout"),o.logout().then(function(){e.path("/login")})}]),angular.module("myApp").controller("editController",["$scope","$location","Service","$routeParams",function(t,e,o,i){t.error=!1,t.errorMessage=[],t.category=null,t.activityid=i.id,console.log(i),t.activity=o.getActivity(t.activityid).then(function(e){console.log(e.data.data),t.processing=!1,t.activity=e.data.data}),t.categories=o.getCategories().then(function(e){console.log(e.data.data),t.processing=!1,t.categories=e.data.data}),t.addhighlights=function(e){t.activity.highlights.push(e),t.value=""},t.addoperator=function(e){t.activity.operator.push(e),t.opvalue={}},t.addtags=function(e){t.activity.tags.push(e),t.tagvalue=""},t.removeTag=function(e){console.log(e);var o=t.activity.tags.indexOf(e);t.activity.tags.splice(o,1)},t.removeHighlights=function(e){console.log(e);var o=t.activity.highlights.indexOf(e);t.activity.highlights.splice(o,1)},t.addattrs=function(e){t.activity.attrs.push(e),t.attrs=""},t.editActivity=function(i){o.putActivities(i,function(o){console.log(o.status),"false"==o.status?(console.log(o.status,"false"),t.errorMessage=o.error):(console.log(o.status,"true"),e.path("/"))})},t.deleteActivity=function(){o.deleteActivity(t.activityid,function(o){(o.status="false")?t.errorMessage=o.error:e.path("/")})}}]),angular.module("myApp").controller("mainController",["$scope","$location","Service",function(t,e,o){t.error=!1,t.processing=!0,t.errorMessage=[],t.selected_category=null,t.activities=[],t.new_activity={},t.new_activity.highlights=[],t.new_activity.tags=[],t.new_activity.operator=[],t.new_activity.attrs=[],t.new_activity.geo=[],t.selected_category=null,t.categories=o.getCategories().then(function(e){console.log(e.data.data),t.processing=!1,t.categories=e.data.data}),t.getActivities=function(e){console.log(e),t.processing=!0,t.activities=o.getActivities(e).then(function(e){console.log(e.data.data),t.activities=e.data.data,t.processing=!1})},t.editCategory=function(t){console.log(t)},t.addhighlights=function(e){null!=e&&""!=e&&(t.new_activity.highlights.push(e),t.value="")},t.addoperator=function(e){null!=e&&(t.new_activity.operator.push(e),t.opvalue={})},t.addtags=function(e){null!=e&&""!=e&&(t.new_activity.tags.push(e),t.tagvalue="")},t.addattrs=function(e){t.new_activity.attrs.push(e),t.attrs=""},t.addActivity=function(i){var a=document.getElementById("lat").value,n=document.getElementById("long").value;null!=a&&i.geo.length<2&&""!=a&&""!=n&&null!=n&&(i.geo.push(a),i.geo.push(n),i.address=document.getElementById("address").value,console.log(i.address)),o.postActivity(i,function(o){console.log(o),"false"==o.status?(console.log("false"),t.errorMessage="some problem with activity value inserted",e.path("/")):e.path("/")})},t.addCategory=function(i){t.error=!1,console.log(i),o.postCategory(i.name,i.discription,i.parent,function(o){"false"==o.status||0==o.status?(console.log(o.error),t.errorMessage=o.error):(console.log(o),e.path("/"),t.new_category={})}).catch(function(){t.error=!0,t.errorMessage="Something went wrong!",t.registerForm={}})},t.logout=function(){console.log("logout"),o.logout().then(function(){e.path("/login")})},t.uploadFile=function(){var i=t.category;t.myFile;o.csvUpload(i,t.myFile,function(o){console.log(o.status,o.status),"false"==o.status?t.errorMessage=o.message:(console.log(o),e.path("/"))})}}]),angular.module("myApp").controller("registerController",["$scope","$location","Service",function(t,e,o){t.register=function(){t.error=!1,t.disabled=!0,o.register(t.registerForm.name,t.registerForm.email,t.registerForm.password).then(function(){e.path("/login"),t.disabled=!1,t.registerForm={}}).catch(function(){t.error=!0,t.errorMessage="Something went wrong!",t.disabled=!1,t.registerForm={}})}}]);