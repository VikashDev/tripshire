var myApp=angular.module("myApp",["ngRoute"]);myApp.config(function(t){t.when("/login",{templateUrl:"partials/login.html",controller:"loginController",access:{restricted:!1}}).when("/logout",{controller:"logoutController",templateUrl:"partials/logout.html"}).when("/register",{templateUrl:"partials/register.html",controller:"registerController",access:{restricted:!1}}).when("/",{templateUrl:"partials/home.html",controller:"mainController",access:{restricted:!0}}).when("/categories/add",{templateUrl:"partials/addcategory.html",controller:"mainController",access:{restricted:!0}}).when("/activities/add",{templateUrl:"partials/addactivity.html",controller:"mainController",access:{restricted:!0}}).when("/categories/edit",{templateUrl:"partials/editcategory.html",controller:"editController",access:{restricted:!0}}).when("/activities/:id",{templateUrl:"partials/editactivity.html",controller:"editController",access:{restricted:!0}}).when("/csv",{templateUrl:"partials/csvupload.html",controller:"mainController",access:{restricted:!0}}).otherwise({redirectTo:"/"})}),myApp.directive("fileModel",["$parse",function(t){return{restrict:"A",link:function(e,r,l){var o=t(l.fileModel),i=o.assign;r.bind("change",function(){e.$apply(function(){i(e,r[0].files[0])})})}}}]),myApp.run(function(t,e,r,l){t.$on("$routeChangeStart",function(t,o,i){l.getUserStatus().then(function(){o.access.restricted&&!l.isLoggedIn()&&(e.path("/login"),r.reload())})})});